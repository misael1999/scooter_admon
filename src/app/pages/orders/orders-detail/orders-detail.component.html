<h2 mat-dialog-title>Detalles del Pedido </h2>
<div *ngIf="loadingOrder" class="spinner-grow text-danger" role="status">
    <span class="sr-only">Loading...</span>
  </div>
<div mat-dialog-content *ngIf="!loadingOrder && order">
    <div class="row">
        <div class="col-lg-12">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th scope="col">Servicio</th>
                        <th scope="col">Cliente</th>
                        <th scope="col">Repartidor</th>
                        <th scope="col">Fecha del pedido</th>
                        <th scope="col">Fecha de entrega</th>
                        <th scope="col">Lugar de compra</th>
                        <th scope="col">Lugar de entrega</th>
                        <th scope="col">Distancia</th>
                        <th scope="col">Costo de productos</th>
                        <th scope="col">Costo de Envio</th>
                        <th scope="col">Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <span *ngIf="order.is_order_to_merchant == false && order.service == 'Compras'"
                                class="badge bg-secondary text-dark">Lo que sea</span>
                            <span *ngIf="order.service == 'Recolección'"
                                class="badge bg-warning text-dark">Recolección</span>
                            <span *ngIf="order.is_order_to_merchant == true"
                                class="badge bg-info text-dark">Compras</span>
                        </td>
                        <td> {{ order.customer.name }} </td>
                        <td>
                            <span *ngIf="order.delivery_man"> {{ order.delivery_man.name }} </span>
                            <span *ngIf="!order.delivery_man"> Sin repartidor </span>
                        </td>

                        <td> {{ order.order_date | date:'medium' }} </td>
                        <td> {{ order.date_delivered_order | date:'medium'}} </td>
                        <td>
                            <span *ngIf="order.is_order_to_merchant == true"> {{ order.merchant.merchant_name }}</span>
                            <span *ngIf="order.is_order_to_merchant == false"> {{ order.from_address.full_address }}
                            </span>
                        </td>
                        <td> {{ order.to_address.full_address }}</td>
                        <td> {{ order.distance | number }} KM</td>

                        <td> $ {{ order.order_price }} </td>
                        <td> $ {{ order.service_price | number : '1.2-2' }} </td>
                        <td> $ {{ order.total_order }} </td>

                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-lg-12">
            <table class="table table-hover table-bordered ">
                <thead>
                    <tr>
                        <th scope="col">Cantidad</th>
                        <th scope="col">Productos</th>
                        <th scope="col">P. Unitario</th>
                        <th scope="col" class="text-end">Total</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let info of orderDetails">
                        <td> {{ info.quantity }} </td>
                        <td> {{ info.product_name }} <br>

                            <span class="p-l-10" *ngFor="let menu of info.menu_options">
                                <span> {{ menu.menu_name }} </span>

                                <span>

                                    <div class="p-l-20 border flex d-flex justify-content-between">
                                        <span>Cantidad</span>
                                        <span>Opcion</span>
                                        <span>Precio</span>

                                    </div>
                                    <div class="p-l-20 flex d-flex justify-content-between"
                                        *ngFor="let option of menu.options">
                                        <span class="border"> {{option.quantity}} </span>
                                        <span class="border"> {{ option.option_name}} </span>
                                        <span class="border"> {{ option.price_option }} </span>

                                    </div>
                                </span>
                            </span>
                        </td>


                        <td>$ {{ info.product_price }} </td>
                        <td>$ {{ info.total_detail }} </td>
                    </tr>
                    <tr>
                        <th colspan="2" class="border-0"></th>
                        <th>Envío</th>
                        <th>$ {{order.service_price}} </th>
                    </tr>
                    <tr>
                        <th colspan="2" class="border-0"></th>
                        <th>Total</th>
                        <th>
                            <span *ngIf="order.total_order">$ {{order.total_order}} </span>
                            <!-- <span *sngIf="!order.total_order"> El total depende del costo de los productos comprados</span> -->

                        </th>
                    </tr>
                </tbody>


                <!-- <tbody *ngFor="let info of orderDetails">
                        <tr>
                            <th scope="row" class="d-flex align-items-start">{{ info.quantity }}</th>
                            <td> {{ info.product_name }}

                                <span *ngFor="let menu of info.menu_options">{{ menu.menu_name }}

                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th scope="col">Cantidad</th>
                                                <th scope="col">Opcion</th>
                                                <th scope="col">Precio</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let option of menu.options">
                                                <td> -x{{ option.quantity}} </td>
                                                <td>{{ option.option_name}}</td>
                                                <td>{{ option.price_option }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </span>
                            </td>
                            <th scope="row" class="d-flex align-items-start">$ {{ info.product_price }} </th>
                            <th scope="row" class="d-flex align-items-start">$ {{ info.total_detail }} </th>
                    </tbody> -->
            </table>
        </div>
    </div>

</div>